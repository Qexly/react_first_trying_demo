(this["webpackJsonpmy-first-app"]=this["webpackJsonpmy-first-app"]||[]).push([[0],{104:function(e,t,n){"use strict";t.a=n.p+"static/media/ava.8a99c228.png"},125:function(e,t,n){"use strict";n.d(t,"b",(function(){return c}));var r=n(35),i=n(5),a={dialogsData:[{id:1,name:"Dimitry"},{id:2,name:"Andrew"},{id:3,name:"Maxim"},{id:4,name:"Peter"},{id:5,name:"Vitalya"},{id:6,name:"Vladislav"}],messagesData:[{id:1,message:"Hi, how are u?"},{id:2,message:"Wazzup! All ok!"},{id:3,message:"Nice!"}]};function c(e){return{type:"SEND-MEASSAGE",message:e}}t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1?arguments[1]:void 0;return"SEND-MEASSAGE"==t.type?Object(i.a)(Object(i.a)({},e),{},{messagesData:[].concat(Object(r.a)(e.messagesData),[{id:0,message:t.message}]),newMessageBody:""}):e}},132:function(e,t,n){e.exports={selectedPage:"Paginator_selectedPage__26a7U"}},133:function(e,t,n){e.exports={photo:"Users_photo__34R71",selectedPage:"Users_selectedPage__2BUTW"}},167:function(e,t,n){},168:function(e,t,n){},18:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return o}));var r=n(131),i=n.n(r).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"497bcbb4-0b88-476a-b19e-e5f96"}}),a={getUsers:function(e,t){return i.get("users?count=".concat(e,"&page=").concat(t)).then((function(e){return e.data}))},unfollow:function(e){return i.delete("follow/".concat(e))},follow:function(e){return i.post("follow/".concat(e))}},c={getProfile:function(e){return i.get("profile/".concat(e))},getStatus:function(e){return i.get("profile/status/".concat(e))},updateStatus:function(e){return i.put("profile/status",{status:e})}},o={me:function(){return i.get("auth/me")},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i.post("/auth/login",{email:e,password:t,remeberMe:n})},logout:function(){return i.delete("/auth/login")}}},27:function(e,t,n){e.exports={item:"Navbar_item__1mwnN",active:"Navbar_active__K_OfL"}},287:function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(0),a=n.n(i),c=n(60),o=n.n(c),s=(n(167),n(23)),u=n(24),l=n(26),j=n(25),d=(n(168),n(14)),b=n(27),O=n.n(b);var h=function(){return Object(r.jsx)("div",{children:Object(r.jsxs)("nav",{children:[Object(r.jsx)("div",{className:O.a.item,children:Object(r.jsx)(d.b,{to:"/profile",activeClassName:O.a.active,children:"Profile"})}),Object(r.jsx)("div",{className:O.a.item,children:Object(r.jsx)(d.b,{to:"/dialogs",activeClassName:O.a.active,children:"Messages"})}),Object(r.jsx)("div",{className:O.a.item,children:Object(r.jsx)(d.b,{to:"/users",activeClassName:O.a.active,children:"Users"})}),Object(r.jsx)("div",{className:O.a.item,children:Object(r.jsx)(d.b,{to:"#",children:"News"})}),Object(r.jsx)("div",{className:O.a.item,children:Object(r.jsx)(d.b,{to:"#",children:"Music"})}),Object(r.jsx)("div",{className:O.a.item,children:Object(r.jsx)(d.b,{to:"#",children:"Settings"})})]})})},f=n(10),p=n(11),g=n(35),m=n(5),x=n(18),v={users:[],pageSize:5,currentPage:1,totalUsersCount:100,isFetching:!0,isFollowinProg:[]};var S=function(e){return{type:"TOGGLE_FOLLOW",userId:e}},P=function(e){return{type:"SET_PAGE",currentPage:e}},T=function(e){return{type:"TOGGLE_FETCHING",isFetching:e}},C=function(e,t){return{type:"TOGGLE_FOLLOW_PROGRESS",isFollowOnProg:e,userId:t}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_FOLLOW":return Object(m.a)(Object(m.a)({},e),{},{users:e.users.map((function(e){return t.userId==e.id&&(e.followed=!e.followed),e}))});case"SET_USERS":return Object(m.a)(Object(m.a)({},e),{},{users:[,].concat(Object(g.a)(t.users))});case"SET_PAGE":return Object(m.a)(Object(m.a)({},e),{},{currentPage:t.currentPage});case"SET_TOTAL":return Object(m.a)(Object(m.a)({},e),{},{totalUsersCount:t.total});case"TOGGLE_FETCHING":return Object(m.a)(Object(m.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE_FOLLOW_PROGRESS":return Object(m.a)(Object(m.a)({},e),{},{isFollowinProg:t.isFollowOnProg?[].concat(Object(g.a)(e.isFollowinProg),[t.userId]):e.isFollowinProg.filter((function(e){return e!=t.userId}))});default:return e}},_=n(128),E=n(132),y=n.n(E);var k=function(e){for(var t=e.portionsSize,n=Math.ceil(e.usersCount/e.pageSize),a=[],c=0;c<n;c++)a.push(1+c);for(var o=Math.ceil(n/t),s=Object(i.useState)(1),u=Object(_.a)(s,2),l=u[0],j=u[1],d=t*l,b=[],O=d-(t-1);O<d+1;O++)a[O-1]&&b.push(a[O-1]);return Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:function(e){l-1>=1&&j((function(e){return--e}))},children:"<"}),b.map((function(t){return Object(r.jsx)("span",{className:e.currentPage==t?y.a.selectedPage:null,onClick:e.onPageChangeHandler,children:t+" "},t)})),Object(r.jsx)("button",{onClick:function(e){l+1<=o&&j((function(e){return++e}))},children:">"})]})},A=n(133),F=n.n(A),N=n(104),L=function(e){e.isFollowinProg,e.followTogglerThunkCreator;var t=e.item;return Object(r.jsxs)("div",{children:[Object(r.jsxs)("span",{children:[Object(r.jsx)("div",{children:Object(r.jsx)(d.b,{to:"/profile/"+t.id,children:Object(r.jsx)("img",{src:t.photos.small?t.photos.small:N.a,className:F.a.photo})})}),Object(r.jsx)("div",{children:t.followed?Object(r.jsx)("button",{disabled:e.isFollowinProg.includes(t.id),onClick:function(){e.followTogglerThunkCreator(t.id,!1)},children:"Unfollow"}):Object(r.jsx)("button",{disabled:e.isFollowinProg.includes(t.id),onClick:function(){e.followTogglerThunkCreator(t.id,!0)},children:"Follow"})})]}),Object(r.jsxs)("span",{children:[Object(r.jsxs)("span",{children:[Object(r.jsx)("div",{children:t.name}),Object(r.jsx)("div",{children:t.status})]}),Object(r.jsxs)("span",{children:[Object(r.jsx)("div",{children:"item.location.country"}),Object(r.jsx)("div",{children:"item.location.city"})]})]})]})};var U=function(e){var t=e.usersCount,n=e.pageSize,i=e.currentPage,a=e.onPageChangeHandler,c=e.isFollowinProg,o=e.followTogglerThunkCreator;return Object(r.jsxs)("div",{children:[Object(r.jsx)(k,Object(m.a)(Object(m.a)({},{usersCount:t,pageSize:n,currentPage:i,onPageChangeHandler:a}),{},{portionsSize:10})),e.users.map((function(e){return Object(r.jsx)(L,Object(m.a)({},{isFollowinProg:c,followTogglerThunkCreator:o,item:e}))}))]})},D=n(62),z=n(91),G=n(9),I=n(134),M=Object(I.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),R=function(e){return e.usersPage.pageSize},H=function(e){return e.usersPage.currentPage},W=function(e){return e.usersPage.totalUsersCount},B=function(e){return e.usersPage.isFetching},V=function(e){return e.usersPage.isFollowinProg},Y=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).onPageChangeHandler=function(e){r.props.getUsersThunkCreator(r.props.pageSize,+e.currentTarget.innerText)},r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsersThunkCreator(this.props.pageSize,this.props.currentPage)}},{key:"render",value:function(){return Object(r.jsxs)(i.Fragment,{children:[this.props.isFetching?Object(r.jsx)(D.a,{}):null,Object(r.jsx)(U,{usersCount:this.props.usersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,users:this.props.users,isFollowinProg:this.props.isFollowinProg,onPageChangeHandler:this.onPageChangeHandler,followTogglerThunkCreator:this.props.followTogglerThunkCreator})]})}}]),n}(a.a.Component),J=Object(G.d)(z.a,Object(p.b)((function(e){return{users:M(e),pageSize:R(e),currentPage:H(e),usersCount:W(e),isFetching:B(e),isFollowinProg:V(e)}}),{followTogglerThunkCreator:function(e,t){return function(n){n(C(!0,e)),t?x.a.follow(e).then((function(t){0===t.data.resultCode&&n(S(e)),n(C(!1,e))})):x.a.unfollow(e).then((function(t){0===t.data.resultCode&&n(S(e)),n(C(!1,e))}))}},onSetPage:P,getUsersThunkCreator:function(e,t){return function(n){n(T(!0)),n(P(t)),x.a.getUsers(e,t).then((function(e){n({type:"SET_USERS",users:e.items}),n({type:"SET_TOTAL",total:e.totalCount}),n(T(!1))}))}}}))(Y),K=n.p+"static/media/logo.a7a52973.png",X=n(87),q=n.n(X);var Q=function(e){return Object(r.jsxs)("header",{children:[Object(r.jsx)("img",{src:K,alt:"d",className:q.a.logo}),Object(r.jsx)("div",{className:q.a.loginBlock,children:e.isAuth?Object(r.jsxs)("div",{children:[e.login," ",Object(r.jsx)("button",{onClick:e.logout,children:"Log out"})]}):Object(r.jsx)(d.b,{to:"/login",children:"Login"})})]})},Z=n(51),$={id:null,email:null,login:null,isAuth:!1,isFetching:null},ee=function(e){return{type:"SET_USER_DATA",data:{id:e.id,email:e.email,login:e.login,isAuth:e.isAuth}}},te=function(){return function(e){return x.b.me().then((function(t){0===t.data.resultCode&&e(ee(Object(m.a)(Object(m.a)({},t.data.data),{},{isAuth:!0})))}))}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(m.a)(Object(m.a)({},e),t.data);default:return e}},re=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(r.jsx)(Q,Object(m.a)({},this.props))}}]),n}(a.a.Component);var ie=Object(p.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{getAuthUserData:te,logout:function(){return function(e){x.b.logout().then((function(t){0===t.data.resultCode&&e(ee({id:null,email:null,login:null,isAuth:!1}))}))}}})(re),ae=n(126),ce=n(127),oe=n(92),se=n(69),ue=Object(se.a)(30),le=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"onSubmitHandler",value:function(e){this.props.login(e.email,e.password,e.rememberMe)}},{key:"render",value:function(){return this.props.isAuth?Object(r.jsx)(f.a,{to:"/profile"}):Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Login"}),Object(r.jsx)(je,{onSubmit:this.onSubmitHandler.bind(this)})]})}}]),n}(a.a.Component),je=Object(ce.a)({form:"login"})((function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)("div",{children:Object(r.jsx)(ae.a,{type:"text",placeholder:"Login",name:"email",component:oe.a,validate:[se.b,ue]})}),Object(r.jsx)("div",{children:Object(r.jsx)(ae.a,{type:"password",placeholder:"Password",name:"password",component:"input"})}),Object(r.jsx)("div",{children:Object(r.jsxs)("label",{children:[Object(r.jsx)(ae.a,{type:"checkbox",component:"input",name:"rememberMe"})," remember me "]})}),Object(r.jsxs)("div",{children:[e.error?Object(r.jsxs)("span",{children:[e.error,Object(r.jsx)("br",{})]}):null,Object(r.jsx)("button",{children:"Login"})]})]})})),de=Object(p.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t,n){return function(r){x.b.login(e,t,n).then((function(e){if(0===e.data.resultCode)r(te());else{var t=Object(Z.a)("login",{_error:e.data.messages});r(t)}}))}}})(le),be={initialized:!1},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;return"INITIAL_SUCCES"===t.type?Object(m.a)(Object(m.a)({},e),{},{initialized:!0}):e},he=a.a.lazy((function(){return n.e(4).then(n.bind(null,296))})),fe=a.a.lazy((function(){return n.e(3).then(n.bind(null,295))})),pe=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initialAppTC()}},{key:"render",value:function(){return this.props.initialized?Object(r.jsx)(d.a,{children:Object(r.jsxs)("div",{className:"wrapper",children:[Object(r.jsx)("div",{className:"app-wrapper-header",children:Object(r.jsx)(ie,{})}),Object(r.jsxs)("main",{children:[Object(r.jsx)("div",{className:"app-wrapper-sidebar",children:Object(r.jsx)(h,{})}),Object(r.jsxs)("div",{className:"app-wrapper-content",children:[Object(r.jsx)(f.b,{path:"/dialogs",render:function(){return Object(r.jsx)(a.a.Suspense,{fallback:Object(r.jsx)("div",{children:"Loading..."}),children:Object(r.jsx)(he,{})})}}),Object(r.jsx)(f.b,{path:"/profile/:userId?",render:function(){return Object(r.jsx)(a.a.Suspense,{fallback:Object(r.jsx)("div",{children:"Loading..."}),children:Object(r.jsx)(fe,{})})}}),Object(r.jsx)(f.b,{path:"/users",render:function(){return Object(r.jsx)(J,{})}}),Object(r.jsx)(f.b,{path:"/login",render:function(){return Object(r.jsx)(de,{})}})]})]})]})}):Object(r.jsx)(D.a,{})}}]),n}(a.a.Component),ge=Object(p.b)((function(e){return{initialized:e.app.initialized}}),{initialAppTC:function(){return function(e){e(te()).then((function(t){e({type:"INITIAL_SUCCES"})}))}}})(pe),me=n(136),xe=n(93),ve=n(125),Se=n(129),Pe=Object(G.c)({profilePage:xe.b,dialogsPage:ve.a,usersPage:w,auth:ne,form:Se.a,app:Oe}),Te=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||G.d,Ce=Object(G.e)(Pe,Te(Object(G.a)(me.a)));window.store=Ce;var we=Ce;o.a.render(Object(r.jsx)(p.a,{store:we,children:Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(ge,{})})}),document.getElementById("root"))},50:function(e,t,n){e.exports={error:"FormsControls_error__3jYWG"}},62:function(e,t,n){"use strict";var r=n(1),i=(n(0),n.p+"static/media/35.afd216a7.svg");t.a=function(e){return Object(r.jsx)("div",{children:Object(r.jsx)("img",{src:i})})}},69:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r=function(e){if(!e)return"Field is required"},i=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}}},87:function(e,t,n){e.exports={logo:"Header_logo__2kmap",loginBlock:"Header_loginBlock__2Z0YQ"}},91:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(5),i=n(23),a=n(24),c=n(26),o=n(25),s=n(1),u=n(0),l=n.n(u),j=n(10),d=n(11),b=function(e){return{isAuth:e.auth.isAuth}},O=function(e){var t=function(t){Object(c.a)(u,t);var n=Object(o.a)(u);function u(e){return Object(i.a)(this,u),n.call(this,e)}return Object(a.a)(u,[{key:"render",value:function(){return this.props.isAuth?Object(s.jsx)(e,Object(r.a)({},this.props)):Object(s.jsx)(j.a,{to:"/login"})}}]),u}(l.a.Component);return Object(d.b)(b)(t)}},92:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var r=n(5),i=n(88),a=n(1),c=(n(0),n(50)),o=n.n(c),s=function(e){var t=e.input,n=e.meta,c=Object(i.a)(e,["input","meta"]),s=n.touched&&n.error;return Object(a.jsxs)("div",{children:[Object(a.jsx)("textarea",Object(r.a)(Object(r.a)({className:s?o.a.error:null},t),c)),Object(a.jsx)("br",{}),s&&Object(a.jsx)("span",{className:o.a.error,children:n.error})]})},u=function(e){var t=e.input,n=e.meta,c=Object(i.a)(e,["input","meta"]),s=n.touched&&n.error;return Object(a.jsxs)("div",{children:[Object(a.jsx)("input",Object(r.a)(Object(r.a)({className:s?o.a.error:null},t),c)),Object(a.jsx)("br",{}),s&&Object(a.jsx)("span",{className:o.a.error,children:n.error})]})}},93:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return j}));var r=n(35),i=n(5),a=n(18),c={postData:[{id:1,message:"Hi, how are u?",likesCount:2},{id:2,message:"Hi, it's my first post",likesCount:3}],profile:null,status:""};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;return"ADD-POST"==t.type?Object(i.a)(Object(i.a)({},e),{},{postData:[].concat(Object(r.a)(e.postData),[{id:3,message:t.postText,likesCount:0}])}):"SET_USER_PROFILE"==t.type?Object(i.a)(Object(i.a)({},e),{},{profile:t.profile}):"SET-USER-STATUS"==t.type?Object(i.a)(Object(i.a)({},e),{},{status:t.status}):e};var o=function(e){return{type:"ADD-POST",postText:e}},s=function(e){return{type:"SET-USER-STATUS",status:e}},u=function(e){return function(t){a.c.getProfile(e).then((function(e){t({type:"SET_USER_PROFILE",profile:e.data})}))}},l=function(e){return function(t){a.c.getStatus(e).then((function(e){t(s(e.data))}))}},j=function(e){return function(t){a.c.updateStatus(e).then((function(n){0===n.data.resultCode&&t(s(e))}))}}}},[[287,1,2]]]);
//# sourceMappingURL=main.c117421c.chunk.js.map